#    ___       __           __           __
#   / _ |__ __/ /____  ___ / /____ _____/ /_
#  / __ / // / __/ _ \(_-</ __/ _ `/ __/ __/
# /_/ |_\_,_/\__/\___/___/\__/\_,_/_/  \__/
#

exec-once = uwsm finalize

# Start Listeners
exec-once = $UWSM_CMD ~/.config/ml4w/listeners.sh --startall

# Start Polkit
exec-once = $UWSM_CMD systemctl --user start hyprpolkitagent
exec-once = $UWSM_CMD /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# Uncomment in case you have issues with screensharing
exec-once = $UWSM_CMD ~/.config/hypr/scripts/xdg.sh

# Load Wallpaper
exec-once = $UWSM_CMD ~/.config/hypr/scripts/wallpaper-restore.sh

# Load Notification Daemon
exec-once = $UWSM_CMD swaync
# exec-once = $UWSM_CMD dunst

# Load GTK settings
exec-once = $UWSM_CMD ~/.config/hypr/scripts/gtk.sh

# Using hypridle to start hyprlock
# hyprlock crashes badly, avoid
exec-once = pidof hypridle || $UWSM_CMD systemctl --user start hypridle.service || $UWSM_CMD hypridle #should started via uwsm + systemd (systemctl --user start hypridle.service)

exec-once = $UWSM_CMD systemctl --user start hyprland-autoname-workspaces.service

# Load cliphist history
# exec-once = $UWSM_CMD wl-paste --type text --watch cliphist store 
# exec-once = $UWSM_CMD wl-paste --type image --watch cliphist store
exec-once = $UWSM_CMD wl-paste --watch cliphist store

# Autostart ML4W App
exec-once = ~/.config/ml4w/scripts/ml4w-autostart.sh

# Start autostart cleanup
exec-once = ~/.config/hypr/scripts/cleanup.sh

# Load configuration from ML4W Hyprland Settings App
exec = ~/.config/com.ml4w.hyprlandsettings/hyprctl.sh

exec-once = printf %s\n "$HYPRLAND_INSTANCE_SIGNATURE" > /tmp/his.log
exec-once = notify-send "NOTICE" "UWSM_CMD is $UWSM_CMD $uwsm_cmd_env"

exec-once = $UWSM_CMD hyprsession default --adjust-clients-only # --save-duplicate-pids doesnt work
# exec-once = $UWSM_CMD hyprsunset # hyprshade comes with ml4w, no need for hyprsunset
exec = $UWSM_CMD hyprshade auto
exec-once = $UWSM_CMD hyprlux > /var/tmp/hyprlux.log 2>&1
# exec-once = $UWSM_CMD waybar #xdg.sh does it
exec = $UWSM_CMD conky -U -c ~/.config/conky/conky.lua
exec-once = $UWSM_CMD btop
exec-once = $UWSM_CMD bitwarden-desktop
exec-once = $UWSM_CMD ckb-next
exec-once = $UWSM_CMD hyprlauncher --daemon
exec-once = $UWSM_CMD /home/talto/bin/multitail_widget.sh 
# exec = xfce4-terminal --title=syslog --execute journalctl --follow

exec-once = $UWSM_CMD udiskie

exec = [workspace 1 float; move -1500 50] $UWSM_CMD teams-for-linux

# exec-once = $UWSM_CMD ~/.config/HyprTile/start-launcher.sh &

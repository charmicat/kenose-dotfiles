#    __  _____  _____      __  _____          ___
#   /  |/  / / / / / | /| / / / ___/__  ___  / _/
#  / /|_/ / /_/_  _/ |/ |/ / / /__/ _ \/ _ \/ _/
# /_/  /_/____//_/ |__/|__/  \___/\___/_//_/_/
#

# UWSM should be reading its env file, but isn't always
# making sure these are set
# XDG Desktop Portal
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland

# SwayNC
layerrule2 = blur, swaync-control-center
layerrule2 = blur, swaync-notification-window
layerrule2 = ignorezero, swaync-control-center
layerrule2 = ignorezero, swaync-notification-window
layerrule2 = ignorealpha 0.5, swaync-control-center
layerrule2 = ignorealpha 0.5, swaync-notification-window

# Blueman Manager
windowrule {
    name = blueman-manager
    match:class = (blueman-manager)
    float = true
    center = true
    size = 800 600
}




# Dotfiles Sidepad
windowrule {
    name = dotfiles-sidepad
    match:class = (dotfiles-sidepad)
    float = true
    pin = true
    center = true
    size = 1000 700
}

# Gnome Calculator
windowrule {
    name = gnome-calculator
    match:class = (org.gnome.Calculator)
    float = true
    center = true
    size = 700 600
}

# Waypaper
windowrule {
    name = waypaper
    match:class = (.*waypaper.*)
    float = true
    center = true
    pin = true
    size = 900 700
}

# Newelle
windowrule {
    name = newelle
    match:class = (io.github.qwersyk.Newelle)
    float = true
    center = true
    pin = true
    size = 1000 700
}

# Hyprland Share Picker
windowrule {
    name = hyprland-share-picker
    match:class = (hyprland-share-picker)
    float = true
    pin = true
    center = true
    size = 600 400
}

# idleinhibit
windowrule {
  name = idleinhibit
  idle_inhibit = fullscreen
#   always = true
#   focus = 0
  no_focus = true
  fullscreen = true
  match:class = ^class:([window]) # Available modes: none
}

# System Mission Center
windowrule {
    name = missioncenter
    match:class = (io.missioncenter.MissionCenter)
    float = true
    center = true
    pin = true
    size = 900 600
}

# ML4W Calendar
windowrule {
    name = ml4w-calendar
    match:class = (com.ml4w.calendar)
    float = true
    move = monitor_w-window_w-18 85
    pin = true
    size = 400 400
}




# ML4W Sidebar
windowrule {
    name = ml4w-sidebar
    match:class = (com.ml4w.sidebar)
    float = true
    move = monitor_w-window_w-18 91
    pin = true
    size = 400 660
}

# ML4W Welcome
windowrule {
    name = ml4w-welcome
    match:class = (com.ml4w.welcome)
    float = true
    center = true
    pin = true
    size = 700 600
}

# ML4W Settings
windowrule {
    name = ml4w-settings
    match:class = (com.ml4w.settings)
    float = true
    center = true
    pin = true
    size = 800 600
}

# nm-connection-editor
windowrule {
    name = nm-connection-editor
    match:class = (nm-connection-editor)
    float = true
    center = true
    size = 800 700
}

# nwg-displays
windowrule {
    name = nwg-displays
    match:class = (nwg-displays)
    float = true
    center = true
    size = 900 600
}

# nwg-look
windowrule {
    name = nwg-look
    match:class = (nwg-look)
    float = true
    center = true
    size = 700 600
}

# Pavucontrol
windowrule {
    name = pavucontrol
    match:class = (.*org.pulseaudio.pavucontrol.*)
    float = true
    center = true
    pin = true
    size = 700 600
}

# Picture-in-Picture
windowrule {
    name = Picture-in-Picture
    match:title = ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
    float = true
    pin = true
    center = true
}

# General floating
windowrule {
    name = dotfiles-floating
    match:class = (dotfiles-floating)
    float = true
    center = true
    size = 1000 700
}



# Float and center file pickers
windowrule {
    name = file-pickers
    match:class = (xdg-desktop-portal-gtk)
    match:title = (^(Open.*Files?|Save.*Files?|All Files|Save))
    float = true
    center = true
    pin = true
    size = 900 700
}

# Float and center file pickers
# windowrule = float, class:xdg-desktop-portal-gtk, title:^(Open.*Files?|Save.*Files?|All Files|Save)
# windowrule = center, class:xdg-desktop-portal-gtk, title:^(Open.*Files?|Save.*Files?|All Files|Save)

# Ignore maximize requests from apps. You'll probably like this.
# windowrule = suppressevent maximize, class:.*
# Fix some dragging issues with XWayland
# windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

#xwayland related rules
# when moving objects in resolve a large border is produced 
# This rule prevents that and serves as a template for any problematic xwayland apps
# windowrule = noblur, class:^(\bresolve\b)$, xwayland:1

# This is a general rule for xwayland apps but can have other consequences 
# for one user it impacted EMACs so it's disabled by default 
# It's here as a reference or for quick triage of xwayland ap
#windowrule = noblur, xwayland:1
# when moving objects in resolve a large border is produced 
# This rule prevents that and serves as a template for any problematic xwayland apps

windowrule {
    name = xwayland-video-bridge-fixes
    match:class = xwaylandvideobridge

    no_initial_focus = true
    no_focus = true
    no_anim = true
    no_blur = true
    max_size = 1 1
    opacity = 0.0
    float = true
    pin = false
}
